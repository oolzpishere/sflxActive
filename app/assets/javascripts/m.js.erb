$(document).on('turbolinks:load', function() {

    // $('#gallery_images_attributes_0_image').fileupload();

    // Initialize collapse button
    $('.button-collapse').sideNav({
	      menuWidth: 200, // Default is 240
	      edge: 'left', // Choose the horizontal origin
	      closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
    });

    

    // slideout menu item collapsible
    $('.collapsible').collapsible();

    $('.dropdown-button').dropdown({
	      constrain_width: true, // Does not change width of dropdown to that of the activator
	      hover: true, // Activate on hover
	      gutter: 0, // Spacing from edge
	      belowOrigin: true // Displays dropdown below the button
    });
    
// slick============================================================
    //p index slick
    $('.index-slider-wrap').slick({
	      dots: true,
	      speed: 500
    });

    // page views slider syncing
    // var ViewsSliderArr = $('.views-slider'), ViewsSliderHeights = [];
    // $.each(ViewsSliderArr, function(){
    //     ViewsSliderHeights.push($(this).outerHeight());
    // });
    // console.log(ViewsSliderHeights);
    // var ViewsSliderHeight = ViewsSliderHeights.sort()[ViewsSliderHeights.length - 1] + 30;
    // console.log(ViewsSliderHeight);
    // $('.views-slider').css('height',ViewsSliderHeight);
    
    $('.views-slider-wrap').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        adaptiveHeight: true
        //asNavFor: '.views-slider-nav'
    });
    

    
    // $('.views-slider-nav').slick({
    //     slidesToShow: 3,
    //     slidesToScroll: 1,
    //     asNavFor: '.views-slider-for',
    //     dots: true,
    //     centerMode: true,
    //     focusOnSelect: true
    // });
//===============================================================


    //p initial wave after change page
    Waves.displayEffect();

    $('#wechat-icon').tooltip({
	      delay: 50,
	      position: 'top',
	      html: true
    });

    // p search button prevent bubble: event.stopPropagation();
    $('html').on("click", function() {
	if ($('.search-form').is(":visible")) {
	    $('.search-form').hide();
	}
    });

    $('.header-search-toggle').on("click", function(event){
	event.stopPropagation();
	$('.search-form').stop(true,true).toggle(300);
    });

    $('.search-form').on("click", function(event){
	event.stopPropagation();
    });
//----------------------------------------

		// window resize
		// $(window).on("resize", function() {
		//     WW = $(window).width();

		// });
       

    // $('#gallery_cover').fileupload({
    //     dataType: 'json',
    //     done: function (e, data) {
    //         $.each(data.result.files, function (index, file) {
    //             $('<p/>').text(file.name).appendTo(document.body);
    //         });
    //         debugger;
    //     }
    // });



});
