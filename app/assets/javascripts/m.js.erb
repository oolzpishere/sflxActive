$(document).on('turbolinks:load', function() {

    // $('#gallery_images_attributes_0_image').fileupload();

    // Initialize collapse button
    $('.button-collapse').sideNav({
	      menuWidth: 200, // Default is 240
	      edge: 'left', // Choose the horizontal origin
	      closeOnClick: true // Closes side-nav on <a> clicks, useful for Angular/Meteor
    });

    

    // slideout menu item collapsible
    $('.collapsible').collapsible();

    $('.dropdown-button').dropdown({
	      constrain_width: true, // Does not change width of dropdown to that of the activator
	      hover: true, // Activate on hover
	      gutter: 0, // Spacing from edge
	      belowOrigin: true // Displays dropdown below the button
    });

    //p index slick
    $('.index-slider-wrap').slick({
	      dots: true,
	      speed: 500
    });

    if ( $('#ckeditor').length ) 
	      CKEDITOR.replace( 'ckeditor' );
    if ( $('#ckeditor').prev('label').length ) 
	      $('#ckeditor').prev('label').css('float','none');

    //p initial wave after change page
    Waves.displayEffect();

    $('#wechat-icon').tooltip({
	      delay: 50,
	      position: 'top',
	      html: true
    });

    // p search button prevent bubble: event.stopPropagation();
    $('html').on("click", function() {
	if ($('.search-form').is(":visible")) {
	    $('.search-form').hide();
	}
    });

    $('.header-search-toggle').on("click", function(event){
	event.stopPropagation();
	$('.search-form').stop(true,true).toggle(300);
    });

    $('.search-form').on("click", function(event){
	event.stopPropagation();
    });
//----------------------------------------

		// window resize
		// $(window).on("resize", function() {
		//     WW = $(window).width();

		// });
       

    // $('#gallery_cover').fileupload({
    //     dataType: 'json',
    //     done: function (e, data) {
    //         $.each(data.result.files, function (index, file) {
    //             $('<p/>').text(file.name).appendTo(document.body);
    //         });
    //         debugger;
    //     }
    // });

});
